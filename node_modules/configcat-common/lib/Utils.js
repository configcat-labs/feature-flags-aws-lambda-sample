"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.errorToString = exports.getTimestampAsDate = exports.getSettingsFromConfig = exports.delay = exports.isUndefined = void 0;
var ProjectConfig_1 = require("./ProjectConfig");
var isUndefined = function (comp) { return comp === void 0; };
exports.isUndefined = isUndefined;
function delay(delayMs, obtainCancel) {
    var timerId;
    var promise = new Promise(function (resolve) { return timerId = setTimeout(resolve, delayMs); });
    obtainCancel === null || obtainCancel === void 0 ? void 0 : obtainCancel(function () { return clearTimeout(timerId); });
    return promise;
}
exports.delay = delay;
;
function getSettingsFromConfig(json) {
    return Object.fromEntries(Object.entries(json[ProjectConfig_1.ConfigFile.FeatureFlags]).map(function (_a) {
        var key = _a[0], value = _a[1];
        return [key, ProjectConfig_1.Setting.fromJson(value)];
    }));
}
exports.getSettingsFromConfig = getSettingsFromConfig;
function getTimestampAsDate(projectConfig) {
    return projectConfig ? new Date(projectConfig.Timestamp) : void 0;
}
exports.getTimestampAsDate = getTimestampAsDate;
function errorToString(err, includeStackTrace) {
    if (includeStackTrace === void 0) { includeStackTrace = false; }
    return err instanceof Error
        ? includeStackTrace && err.stack ? err.stack : err.toString()
        : err + "";
}
exports.errorToString = errorToString;
